<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Page 1</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<h1>Page 1</h1>
	<p>
	<a href="page2.html">Page 2</a>
	</p>
	<p>
	<a href="page3.html">Page 3</a>
	</p>
	<h2>Pageshow event</h2>
	<div id="out"></div>
	
	<script>
		(function(win, doc){
      			var out = doc.getElementById("out"),
			eventAlert = function(e) {
				if (e.type === "pageshow") {
					out.innerHTML += "Persisted: " + e.persisted + "<br/>";
				} else {
					//win.alert(doc.title + ": " + e.type + " Persisted: " + e.persisted);
				}
			},

			winEvents = [
				"load",
				// "unload",
				"pageshow",
				"pagehide",
			],

			docEvents = [
				"DOMContentLoaded"
			];
			
			winEvents.forEach(
				function(item) {
					win.addEventListener(item, eventAlert, false);
				}
			);

			docEvents.forEach(
				function(item) {
					doc.addEventListener(item, eventAlert, false);
				}
			);
		}(window, document));
	</script>
</body>
</html>
